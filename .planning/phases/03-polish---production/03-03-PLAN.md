---
phase: 03-polish---production
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - landing/app/layout.tsx
  - landing/public/favicon.ico
  - landing/public/og-image.png
autonomous: false

must_haves:
  truths:
    - "Page has comprehensive SEO metadata for search engines"
    - "Page has social sharing metadata for Twitter and OpenGraph"
    - "Page has proper viewport configuration for mobile"
    - "Page has favicon that displays in browser tabs"
    - "Social media previews show proper title, description, and image"
  artifacts:
    - path: "landing/app/layout.tsx"
      provides: "Enhanced metadata with OpenGraph and Twitter cards"
      contains: "openGraph|twitter|metadataBase"
    - path: "landing/public/favicon.ico"
      provides: "Browser favicon"
      min_lines: 1
    - path: "landing/public/og-image.png"
      provides: "Social sharing preview image"
      min_lines: 1
  key_links:
    - from: "landing/app/layout.tsx"
      to: "Metadata object"
      via: "Next.js Metadata API"
      pattern: "export const metadata.*Metadata"
    - from: "Metadata"
      to: "OG image"
      via: "openGraph.images and twitter.images"
      pattern: "images:.*og-image\\.png"
---

<objective>
Enhance production metadata for SEO and social sharing, add viewport configuration, and create essential brand assets (favicon, OG image) to complete production readiness.

Purpose: Ensure landing page has comprehensive metadata for search engines and social media platforms, improving discoverability and shareability.

Output: Production-ready metadata configuration with OpenGraph/Twitter cards, favicon, and social sharing image.
</objective>

<execution_context>
@/home/jared/dev/riven-landing-worktree/.claude/get-shit-done/workflows/execute-plan.md
@/home/jared/dev/riven-landing-worktree/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@/home/jared/dev/riven-landing-worktree/.planning/PROJECT.md
@/home/jared/dev/riven-landing-worktree/.planning/ROADMAP.md
@/home/jared/dev/riven-landing-worktree/.planning/STATE.md
@/home/jared/dev/riven-landing-worktree/.planning/phases/03-polish---production/03-RESEARCH.md

# Current layout
@/home/jared/dev/riven-landing-worktree/landing/app/layout.tsx
</context>

<tasks>

<task type="auto">
  <name>Create favicon and OG image assets</name>
  <files>
    landing/public/favicon.ico
    landing/public/og-image.png
  </files>
  <action>
Create placeholder favicon and OpenGraph image assets for production deployment.

**Favicon (landing/public/favicon.ico):**
- Simple 32×32px icon with "R" lettermark
- Use brand purple background (hsl(262, 83%, 58%))
- White "R" letter for contrast
- ICO format for broad compatibility

Since we cannot generate actual binary ICO files, create a simple 32×32 SVG that can be converted:

```xml
<!-- Save as favicon.svg first, then convert to ICO -->
<svg width="32" height="32" xmlns="http://www.w3.org/2000/svg">
  <rect width="32" height="32" fill="hsl(262, 83%, 58%)"/>
  <text x="16" y="24" font-family="sans-serif" font-size="20" font-weight="700" fill="white" text-anchor="middle">R</text>
</svg>
```

For now, create favicon.svg. User can convert to .ico using online tools or imagemagick: `convert favicon.svg -define icon:auto-resize=32,16 favicon.ico`

**OG Image (landing/public/og-image.png):**
- 1200×630px (standard OpenGraph dimensions)
- Simple branded preview card
- Purple background with "RIVEN" wordmark and tagline
- White text for contrast

Create SVG template that can be converted to PNG:

```xml
<!-- Save as og-image.svg, then convert to PNG at 1200x630 -->
<svg width="1200" height="630" xmlns="http://www.w3.org/2000/svg">
  <rect width="1200" height="630" fill="hsl(262, 83%, 58%)"/>
  <text x="600" y="280" font-family="sans-serif" font-size="80" font-weight="700" fill="white" text-anchor="middle">RIVEN</text>
  <text x="600" y="360" font-family="sans-serif" font-size="32" fill="rgba(255,255,255,0.9)" text-anchor="middle">Build a CRM that fits your business</text>
</svg>
```

User can convert: `convert og-image.svg -resize 1200x630 og-image.png`

Per RESEARCH.md Open Questions #1: Start with static OG image (recommended approach for MVP).
  </action>
  <verify>
```bash
# Check favicon exists (may be .svg temporarily)
ls -lh landing/public/favicon.*

# Check OG image exists (may be .svg temporarily)
ls -lh landing/public/og-image.*

# Verify SVG content
grep -q "RIVEN" landing/public/og-image.svg 2>/dev/null || echo "OG image needs conversion"
```
  </verify>
  <done>
- landing/public/favicon.svg created with "R" lettermark (user converts to .ico)
- landing/public/og-image.svg created with branded preview (user converts to .png)
- Both use brand purple color
- Proper dimensions specified (32×32 for favicon, 1200×630 for OG)
  </done>
</task>

<task type="auto">
  <name>Enhance metadata configuration in layout</name>
  <files>
    landing/app/layout.tsx
  </files>
  <action>
Enhance existing metadata in landing/app/layout.tsx following RESEARCH.md Pattern 4 (Metadata Configuration).

**Replace existing metadata with comprehensive configuration:**

```tsx
import type { Metadata } from "next"

export const metadata: Metadata = {
  metadataBase: new URL(process.env.NEXT_PUBLIC_SITE_URL || 'https://riven.dev'),

  title: {
    default: 'Riven | Build a CRM that fits your business',
    template: '%s | Riven'
  },

  description: 'Stop contorting your workflows to fit rigid tools. Riven adapts to you.',

  keywords: [
    'crm',
    'custom crm',
    'flexible crm',
    'workflow automation',
    'business tools',
    'saas',
    'founders',
    'startups'
  ],

  openGraph: {
    title: 'Riven | Build a CRM that fits your business',
    description: 'Stop contorting your workflows to fit rigid tools. Riven adapts to you.',
    url: 'https://riven.dev',
    siteName: 'Riven',
    images: [
      {
        url: '/og-image.png',
        width: 1200,
        height: 630,
        alt: 'Riven - Build a CRM that fits your business'
      }
    ],
    locale: 'en_US',
    type: 'website',
  },

  twitter: {
    card: 'summary_large_image',
    title: 'Riven | Build a CRM that fits your business',
    description: 'Stop contorting your workflows to fit rigid tools. Riven adapts to you.',
    images: ['/og-image.png'],
  },

  robots: {
    index: true,
    follow: true,
    googleBot: {
      index: true,
      follow: true,
      'max-image-preview': 'large',
      'max-snippet': -1,
    },
  },

  icons: {
    icon: '/favicon.ico',
  },
}
```

**Add viewport configuration (separate export per Next.js 13.2+):**

```tsx
import type { Viewport } from "next"

export const viewport: Viewport = {
  width: 'device-width',
  initialScale: 1,
  maximumScale: 5,
  userScalable: true,
}
```

**Implementation notes:**
- metadataBase: Uses environment variable (falls back to riven.dev) - user sets NEXT_PUBLIC_SITE_URL in .env
- Keywords: SEO-relevant terms for CRM, workflow automation, founder audience
- OpenGraph: Full configuration for Facebook, LinkedIn sharing
- Twitter: Large image card for rich Twitter previews
- Robots: Allow indexing, show large image previews
- Viewport: Enables responsive design, allows user zoom (accessibility)

Per RESEARCH.md Pattern 4 and Pitfall 5: Comprehensive metadata prevents broken social previews and improves SEO.
  </action>
  <verify>
```bash
# Check metadata export exists and is comprehensive
grep -n "export const metadata" landing/app/layout.tsx

# Verify key metadata fields
grep -n "metadataBase" landing/app/layout.tsx
grep -n "openGraph" landing/app/layout.tsx
grep -n "twitter" landing/app/layout.tsx

# Check viewport configuration
grep -n "export const viewport" landing/app/layout.tsx

# Verify keywords present
grep -n "keywords" landing/app/layout.tsx
```
  </verify>
  <done>
- Metadata object enhanced with metadataBase, keywords, OpenGraph, Twitter, robots
- Viewport configuration added as separate export
- OG image referenced at /og-image.png (1200×630)
- Favicon referenced at /favicon.ico
- All text content uses established copy (headline, description)
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Production-ready metadata configuration with SEO optimization, social sharing cards, favicon, and OG image
  </what-built>
  <how-to-verify>
1. **Local metadata verification:**
   - Open http://localhost:3000
   - View page source (Cmd/Ctrl + U)
   - Expected: `<meta property="og:title" content="Riven | Build a CRM that fits your business">`
   - Expected: `<meta property="og:image" content="/og-image.png">`
   - Expected: `<meta name="twitter:card" content="summary_large_image">`
   - Expected: `<meta name="viewport" content="width=device-width, initial-scale=1">`

2. **Favicon verification:**
   - Check browser tab
   - Expected: "R" icon visible in tab (may be placeholder if .svg not converted to .ico yet)
   - Note: If SVG not displaying, need to convert to .ico (instructions in task 1)

3. **Build verification:**
   ```bash
   cd landing
   npm run build
   ```
   - Expected: Build succeeds with no metadata errors
   - Expected: No warnings about missing images or metadata

4. **Social preview testing (optional but recommended):**
   - Deploy to temporary Vercel preview (if available)
   - Test with Facebook Sharing Debugger: https://developers.facebook.com/tools/debug/
   - Test with Twitter Card Validator: https://cards-dev.twitter.com/validator
   - Expected: Preview shows title, description, and OG image

5. **Metadata completeness check:**
   - View source, search for:
     - ✓ `og:title`
     - ✓ `og:description`
     - ✓ `og:image`
     - ✓ `og:url`
     - ✓ `twitter:card`
     - ✓ `twitter:title`
     - ✓ `twitter:image`
     - ✓ `description` meta tag
     - ✓ `keywords` meta tag

6. **Asset conversion tasks:**
   - If favicon.svg exists but not .ico: Convert using `convert favicon.svg -define icon:auto-resize=32,16 favicon.ico`
   - If og-image.svg exists but not .png: Convert using `convert og-image.svg -resize 1200x630 og-image.png`
   - Or use online converters: cloudconvert.com, convertio.co

**Issues to report:**
- Missing metadata fields in page source
- Build errors or warnings
- Favicon not displaying
- OG image not referenced correctly
- Viewport meta tag missing (responsive design won't work)

**Note:** The SVG placeholders for favicon/OG image are functional but ideally should be converted to proper formats. This can be done now or later - the metadata references are correct either way.
  </how-to-verify>
  <resume-signal>
Type "approved" if metadata is comprehensive and build succeeds, or describe issues. Note if asset conversion is needed but don't block on it - those can be converted anytime.
  </resume-signal>
</task>

</tasks>

<verification>
1. landing/public/favicon.svg and og-image.svg created (convertible to .ico and .png)
2. landing/app/layout.tsx has comprehensive metadata export
3. Metadata includes metadataBase, OpenGraph, Twitter, robots configuration
4. Viewport configuration added as separate export
5. Build succeeds with no errors
6. Page source shows all metadata tags
7. Human verification confirms metadata completeness
</verification>

<success_criteria>
1. Comprehensive SEO metadata configured (title, description, keywords)
2. OpenGraph metadata for Facebook/LinkedIn sharing
3. Twitter Card metadata for Twitter previews
4. Robots configuration allows indexing and large previews
5. Viewport configuration enables responsive design
6. Favicon asset exists (convertible to .ico format)
7. OG image asset exists (convertible to .png format)
8. Build succeeds with no metadata warnings
9. Page source contains all expected meta tags
10. Human verification confirms production readiness
</success_criteria>

<output>
After completion, create `.planning/phases/03-polish---production/03-03-SUMMARY.md`
</output>
