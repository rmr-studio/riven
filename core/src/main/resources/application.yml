spring:
  application:
    name: core
  datasource:
    url: ${POSTGRES_DB_JDBC}
    driver-class-name: org.postgresql.Driver
  jpa:
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    hibernate:
      ddl-auto: none
    show-sql: ${riven.include-stack-trace}
  flyway:
    enabled: true
    baseline-on-migrate: true
    baseline-version: 0
    locations: classpath:db/migration
  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: ${JWT_AUTH_URL}
  temporal:
    workers-auto-discovery:
      packages:
        - riven.core.service.workflow
server:
  port: ${SERVER_PORT}
riven:
  security:
    jwt-secret-key: ${JWT_SECRET_KEY}
    jwt-issuer: ${SUPABASE_URL}
    allowed-origins:
      - ${ORIGIN_API_URL}
  include-stack-trace: true
  supabase-url: ${SUPABASE_URL}
  supabase-key: ${SUPABASE_KEY}
  web-origin: ${ORIGIN_API_URL}
  nango:
    secret-key: ${NANGO_SECRET_KEY:}
    base-url: ${NANGO_BASE_URL:https://api.nango.dev}
    webhook-secret: ${NANGO_WEBHOOK_SECRET:}
  workflow:
    engine:
      target: ${TEMPORAL_SERVER_ADDRESS}
    retry:
      default:
        max-attempts: 3
        initial-interval-seconds: 1
        backoff-coefficient: 2.0
        max-interval-seconds: 30
      http-action:
        max-attempts: 3
        initial-interval-seconds: 2
        backoff-coefficient: 2.0
        max-interval-seconds: 60
        non-retryable-status-codes: [400, 401, 403, 404, 422]
      crud-action:
        max-attempts: 2
        initial-interval-seconds: 1
        backoff-coefficient: 2.0
        max-interval-seconds: 10
  query:
    timeout-seconds: 10
springdoc:
  api-docs:
    path: /docs/v3/api-docs
  swagger-ui:
    path: /docs/swagger-ui.html
