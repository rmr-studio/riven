---
phase: 04-import-updates
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - lib/types/entity/index.ts
  - lib/types/block/index.ts
  - lib/types/workspace/index.ts
  - lib/types/common/index.ts
autonomous: true

must_haves:
  truths:
    - "Enum values can be imported from domain barrels (not just types)"
    - "Common types (Icon, DataType, DataFormat) are importable from @/lib/types/common"
    - "Domain barrels export both types and enum runtime values"
  artifacts:
    - path: "lib/types/entity/index.ts"
      provides: "Entity enum re-exports"
      contains: "export { EntityPropertyType"
    - path: "lib/types/block/index.ts"
      provides: "Block enum re-exports"
      contains: "export { BlockMetadataType"
    - path: "lib/types/workspace/index.ts"
      provides: "Workspace enum re-exports"
      contains: "export { WorkspacePlan"
    - path: "lib/types/common/index.ts"
      provides: "Shared type barrel"
      contains: "IconColour"
  key_links:
    - from: "lib/types/entity/index.ts"
      to: "@/lib/types/models"
      via: "re-export enums"
      pattern: "export \\{ .* \\} from"
---

<objective>
Enhance domain barrels to export enum values and create common barrel for shared types

Purpose: Enable consumer files to import enums from domain barrels instead of types.ts. This is a prerequisite for Plans 02-04 which update consumer imports.

Output: Updated barrel files that export both types and enum runtime values
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md2tb
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-import-updates/04-RESEARCH.md

@lib/types/entity/index.ts
@lib/types/block/index.ts
@lib/types/workspace/index.ts
@lib/types/user/index.ts
@lib/types/models/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add enum exports to entity and block barrels</name>
  <files>lib/types/entity/index.ts, lib/types/block/index.ts</files>
  <action>
Update entity barrel to add enum value exports:

```typescript
// Add after existing exports
export {
  EntityPropertyType,
  EntityCategory,
  EntityRelationshipCardinality,
  EntityTypeRelationshipType,
  EntityTypeRequestDefinition,
  SchemaType,
  DataType,
  OptionSortingType,
  DeleteAction,
} from "@/lib/types/models";
```

Update block barrel to add enum value exports:

```typescript
// Add after existing exports
export {
  BlockMetadataType,
  NodeType,
  RenderType,
  BlockOperationType,
  BlockListOrderingMode,
  ListFilterLogicType,
  BlockReferenceFetchPolicy,
  BlockValidationScope,
  SortDir,
  Presentation,
  ReferenceType,
} from "@/lib/types/models";
```

Note: These are regular exports (not `export type`) because enums are runtime values.
</action>
<verify>Run `npx tsc --noEmit` - no new errors in barrel files</verify>
<done>Entity and block barrels export enum values alongside types</done>
</task>

<task type="auto">
  <name>Task 2: Add enum exports to workspace barrel and create common barrel</name>
  <files>lib/types/workspace/index.ts, lib/types/common/index.ts</files>
  <action>
Update workspace barrel to add enum value exports:

```typescript
// Add after existing exports
export {
  WorkspacePlan,
  WorkspaceRoles,
  WorkspaceInviteStatus,
} from "@/lib/types/models";
```

Create new common barrel at lib/types/common/index.ts for shared types used across domains:

```typescript
// common/index.ts
// Common types shared across multiple domains

// Display/icon types
export type { Icon, DisplayName } from "@/lib/types/models";
export { IconColour, IconType } from "@/lib/types/models";

// Data representation types
export { DataType, DataFormat } from "@/lib/types/models";
```

Also update .openapi-generator-ignore to protect common directory:

```
# Custom type directories (protected from regeneration)
lib/types/entity/**
lib/types/block/**
lib/types/workspace/**
lib/types/user/**
lib/types/common/**
```

  </action>
  <verify>
- `npx tsc --noEmit` passes
- `import { IconColour, IconType, DataType, DataFormat } from "@/lib/types/common"` resolves
  </verify>
  <done>Workspace barrel exports enums, common barrel exists with shared types</done>
</task>

</tasks>

<verification>
```bash
# Verify barrel exports work
npx tsc --noEmit

# Test import resolution (quick TypeScript check)

echo 'import { EntityPropertyType } from "@/lib/types/entity";' | npx tsc --noEmit --allowImportingTsExtensions -

# Verify common barrel exists

ls lib/types/common/index.ts

```
</verification>

<success_criteria>
- All domain barrels export enum values (not just types)
- Common barrel exists with IconColour, IconType, DataType, DataFormat
- TypeScript compilation passes with no new errors
- Generator ignore file protects common directory
</success_criteria>

<output>
After completion, create `.planning/phases/04-import-updates/04-01-SUMMARY.md`
</output>
```
