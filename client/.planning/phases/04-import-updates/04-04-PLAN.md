---
phase: 04-import-updates
plan: 04
type: execute
wave: 2
depends_on: ["04-01"]
files_modified:
  - components/feature-modules/workspace/components/form/workspace-form.tsx
  - components/feature-modules/workspace/interface/workspace.interface.ts
  - components/feature-modules/user/interface/user.interface.ts
  - components/ui/attribute-type-dropdown.tsx
  - components/ui/data-table/data-table-schema.tsx
  - components/ui/icon/icon-cell.tsx
  - components/ui/icon/icon-mapper.tsx
  - components/ui/icon/icon-selector.tsx
  - lib/util/form/common/icon.form.ts
  - lib/util/form/entity-instance-validation.util.ts
  - lib/util/form/schema.util.ts
autonomous: true

must_haves:
  truths:
    - "No workspace/user domain files import from @/lib/types/types"
    - "UI components use @/lib/types/common for shared types"
    - "Lib/util files use domain barrels for type imports"
  artifacts:
    - path: "components/ui/icon/icon-mapper.tsx"
      provides: "IconColour, IconType usage"
      contains: "from \"@/lib/types/common\""
    - path: "lib/util/form/schema.util.ts"
      provides: "SchemaType, DataType usage"
      contains: "SchemaType.Text"
  key_links:
    - from: "components/ui/**/*.tsx"
      to: "@/lib/types/common"
      via: "import statements"
      pattern: "from ['\"]@/lib/types/common['\"]"
---

<objective>
Update workspace, user, UI components, and lib/util files to use domain barrels

Purpose: Complete the import migration for remaining files, satisfying IMP-03 and IMP-04 requirements.

Output: 11 files with updated imports and enum member casing
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/04-import-updates/04-01-SUMMARY.md
@.planning/phases/04-import-updates/04-RESEARCH.md

@lib/types/workspace/index.ts
@lib/types/user/index.ts
@lib/types/common/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update workspace and user domain files</name>
  <files>
    components/feature-modules/workspace/components/form/workspace-form.tsx
    components/feature-modules/workspace/interface/workspace.interface.ts
    components/feature-modules/user/interface/user.interface.ts
  </files>
  <action>
**workspace-form.tsx:**
```typescript
// BEFORE
import { WorkspacePlan } from "@/lib/types/types";

// AFTER
import { WorkspacePlan } from "@/lib/types/workspace";
```

Enum member casing changes:
- `WorkspacePlan.FREE` -> `WorkspacePlan.Free`
- `WorkspacePlan.PRO` -> `WorkspacePlan.Pro`
- `WorkspacePlan.ENTERPRISE` -> `WorkspacePlan.Enterprise`

**Interface files (workspace.interface.ts, user.interface.ts):**
Per CONTEXT.md: Leave `operations` imports as-is for type extraction. These will be cleaned up in Phase 5.

Only update if there are enum imports from types.ts that should come from domain barrels.
  </action>
  <verify>
```bash
grep -r "from ['\"]@/lib/types/types['\"]" components/feature-modules/workspace/components/ | wc -l
# Should be 0
```
  </verify>
  <done>Workspace and user domain files import from domain barrels</done>
</task>

<task type="auto">
  <name>Task 2: Update UI components and lib/util files</name>
  <files>
    components/ui/attribute-type-dropdown.tsx
    components/ui/data-table/data-table-schema.tsx
    components/ui/icon/icon-cell.tsx
    components/ui/icon/icon-mapper.tsx
    components/ui/icon/icon-selector.tsx
    lib/util/form/common/icon.form.ts
    lib/util/form/entity-instance-validation.util.ts
    lib/util/form/schema.util.ts
  </files>
  <action>
**UI icon components (icon-cell.tsx, icon-mapper.tsx, icon-selector.tsx):**
```typescript
// BEFORE
import { IconColour, IconType } from "@/lib/types/types";

// AFTER
import { IconColour, IconType } from "@/lib/types/common";
```

Enum member casing changes:
- `IconColour.NEUTRAL` -> `IconColour.Neutral`
- `IconColour.BLUE` -> `IconColour.Blue`
- `IconColour.GREEN` -> `IconColour.Green`
- `IconColour.RED` -> `IconColour.Red`
- `IconColour.YELLOW` -> `IconColour.Yellow`
- `IconColour.PURPLE` -> `IconColour.Purple`
- `IconColour.PINK` -> `IconColour.Pink`
- `IconColour.ORANGE` -> `IconColour.Orange`
- `IconType.A_LARGE_SMALL` -> `IconType.ALargeSmall`
- `IconType.CALCULATOR` -> `IconType.Calculator`
- `IconType.CHECK_CHECK` -> `IconType.CheckCheck`
- `IconType.CALENDAR_RANGE` -> `IconType.CalendarRange`
- `IconType.CALENDAR_CLOCK` -> `IconType.CalendarClock`
- `IconType.STAR` -> `IconType.Star`
- `IconType.PHONE` -> `IconType.Phone`
- (and all other IconType variants - use PascalCase)

**attribute-type-dropdown.tsx:**
```typescript
// BEFORE
import { DataType, IconColour, IconType, SchemaType } from "@/lib/types/types";

// AFTER
import { IconColour, IconType, DataType } from "@/lib/types/common";
import { SchemaType } from "@/lib/types/entity";
```

**data-table-schema.tsx:**
```typescript
// BEFORE
import { DataFormat, DataType } from "@/lib/types/types";

// AFTER
import { DataFormat, DataType } from "@/lib/types/common";
```

**lib/util/form files:**
```typescript
// icon.form.ts
// BEFORE
import { IconColour, IconType } from "@/lib/types/types";
// AFTER
import { IconColour, IconType } from "@/lib/types/common";

// entity-instance-validation.util.ts
// BEFORE
import { DataFormat, DataType, EntityRelationshipCardinality, SchemaType } from "@/lib/types/types";
// AFTER
import { DataFormat, DataType } from "@/lib/types/common";
import { EntityRelationshipCardinality, SchemaType } from "@/lib/types/entity";

// schema.util.ts (heavily uses enums - many casing changes)
// BEFORE
import { DataFormat, DataType, IconColour, IconType, SchemaType } from "@/lib/types/types";
// AFTER
import { IconColour, IconType, DataFormat, DataType } from "@/lib/types/common";
import { SchemaType } from "@/lib/types/entity";
```

Apply all SchemaType, DataType, DataFormat, IconColour, IconType enum member casing changes as in previous plans.

Additional casing for DataFormat:
- `DataFormat.DATE` -> `DataFormat.Date`
- `DataFormat.DATETIME` -> `DataFormat.Datetime`
- `DataFormat.PHONE` -> `DataFormat.Phone`
- `DataFormat.EMAIL` -> `DataFormat.Email`
- `DataFormat.URL` -> `DataFormat.Url`
- `DataFormat.ISO8601` -> `DataFormat.Iso8601`
  </action>
  <verify>
```bash
# Verify no legacy imports remain
grep -r "from ['\"]@/lib/types/types['\"]" components/ui/ lib/util/form/ | wc -l
# Should be 0

npx tsc --noEmit
```
  </verify>
  <done>UI components and lib/util files import from domain barrels with PascalCase enum members</done>
</task>

</tasks>

<verification>
```bash
# Final check: no consumer files import from @/lib/types/types
# (Only barrel internal files using 'operations' should remain)
grep -r "from ['\"]@/lib/types/types['\"]" components/ lib/util/ --include="*.ts" --include="*.tsx"
# Should be empty

# Verify all success criteria
npx tsc --noEmit

# Count remaining types.ts imports (should only be in barrel files)
grep -r "from ['\"]@/lib/types/types['\"]" --include="*.ts" --include="*.tsx" | grep -v ".planning" | wc -l
# Should be ~3 (barrel internal files only)
```
</verification>

<success_criteria>
- No workspace domain files import from @/lib/types/types
- No user domain files import from @/lib/types/types
- UI components import shared types from @/lib/types/common
- Lib/util files import from appropriate domain barrels
- All enum member references use PascalCase
- TypeScript compilation passes
- IMP-03 and IMP-04 requirements satisfied
</success_criteria>

<output>
After completion, create `.planning/phases/04-import-updates/04-04-SUMMARY.md`
</output>
