---
phase: 02-type-barrels
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - lib/types/workspace/models.ts
  - lib/types/workspace/requests.ts
  - lib/types/workspace/responses.ts
  - lib/types/workspace/custom.ts
  - lib/types/workspace/index.ts
  - lib/types/user/models.ts
  - lib/types/user/requests.ts
  - lib/types/user/responses.ts
  - lib/types/user/custom.ts
  - lib/types/user/index.ts
autonomous: true

must_haves:
  truths:
    - "import type { Workspace } from '@/lib/types/workspace' resolves correctly"
    - "import type { User } from '@/lib/types/user' resolves correctly"
    - "Path parameter types like GetWorkspacePathParams are importable from workspace barrel"
    - "Response types like GetCurrentUserResponse are importable from user barrel"
  artifacts:
    - path: "lib/types/workspace/index.ts"
      provides: "Barrel aggregation for workspace domain"
      contains: "export"
    - path: "lib/types/user/index.ts"
      provides: "Barrel aggregation for user domain"
      contains: "export"
    - path: "lib/types/workspace/custom.ts"
      provides: "Operation-derived types for workspace"
      contains: "GetWorkspacePathParams"
    - path: "lib/types/user/custom.ts"
      provides: "Operation-derived types for user"
      contains: "GetCurrentUserResponse"
  key_links:
    - from: "lib/types/workspace/index.ts"
      to: "lib/types/workspace/models.ts"
      via: "re-export"
      pattern: "export.*from.*models"
    - from: "lib/types/user/index.ts"
      to: "lib/types/user/models.ts"
      via: "re-export"
      pattern: "export.*from.*models"
    - from: "lib/types/workspace/custom.ts"
      to: "@/lib/types/types"
      via: "operations import"
      pattern: "import.*operations"
    - from: "lib/types/user/custom.ts"
      to: "@/lib/types/types"
      via: "operations import"
      pattern: "import.*operations"
---

<objective>
Create domain-based barrel exports for workspace and user types, consolidating generated OpenAPI types with operation-derived custom types into single import paths.

Purpose: Enable `import type { Workspace } from "@/lib/types/workspace"` and `import type { User } from "@/lib/types/user"` patterns that provide all domain types through semantic imports.

Output: Complete workspace/ and user/ barrel directories with categorized files (models, requests, responses, custom) and index.ts aggregation files.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-type-barrels/02-CONTEXT.md
@.planning/phases/02-type-barrels/02-RESEARCH.md
@components/feature-modules/workspace/interface/workspace.interface.ts
@components/feature-modules/user/interface/user.interface.ts
@lib/types/models/index.ts
@lib/types/types.ts (for operations type)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create workspace domain barrel</name>
  <files>
    lib/types/workspace/models.ts
    lib/types/workspace/requests.ts
    lib/types/workspace/responses.ts
    lib/types/workspace/custom.ts
    lib/types/workspace/index.ts
  </files>
  <action>
Create the lib/types/workspace/ directory with categorized barrel files:

**models.ts** - Re-export workspace model types from @/lib/types/models:
- Core: Workspace, WorkspaceMember, WorkspaceInvite, WorkspaceDisplay
- Enums/Subtypes: WorkspacePlan, WorkspaceDefaultCurrency, WorkspaceRoles, WorkspaceInviteStatus

**requests.ts** - Re-export workspace request types from @/lib/types/models:
- SaveWorkspaceRequest

**responses.ts** - Empty initially since workspace responses are typically the model itself.
Add a comment explaining responses are typically Workspace or void.

**custom.ts** - Move operation-derived types from workspace.interface.ts:
Import `operations` from "@/lib/types/types".
Import `WorkspaceInvite` from "./models".

Path parameter types (from operations):
- GetWorkspacePathParams = operations["getWorkspace"]["parameters"]["path"]
- DeleteWorkspacePathParams = operations["deleteWorkspace"]["parameters"]["path"]
- UpdateMemberRolePathParams = operations["updateMemberRole"]["parameters"]["path"]
- InviteToWorkspacePathParams = operations["inviteToWorkspace"]["parameters"]["path"]
- RejectInvitePathParams = operations["rejectInvite"]["parameters"]["path"]
- AcceptInvitePathParams = operations["acceptInvite"]["parameters"]["path"]
- GetWorkspaceInvitesPathParams = operations["getWorkspaceInvites"]["parameters"]["path"]
- RemoveMemberFromWorkspacePathParams = operations["removeMemberFromWorkspace"]["parameters"]["path"]
- RevokeInvitePathParams = operations["revokeInvite"]["parameters"]["path"]

Query parameter types:
- GetWorkspaceQueryParams = operations["getWorkspace"]["parameters"]["query"]

Derived model types:
- WorkspaceInviteStatus = WorkspaceInvite["status"] (type alias for the enum)

**index.ts** - Aggregate all exports:
- `export type * from "./models";`
- `export type * from "./requests";`
- `export type * from "./responses";`
- `export * from "./custom";`

Use explicit `export type { }` syntax in type-only files.
  </action>
  <verify>
Run TypeScript check: `npx tsc --noEmit lib/types/workspace/index.ts`
Verify imports resolve: Create temp test with `import type { Workspace, GetWorkspacePathParams } from "@/lib/types/workspace"` and run tsc
  </verify>
  <done>
All 5 workspace barrel files exist with correct exports. TypeScript compiles without errors. Workspace, WorkspaceMember, GetWorkspacePathParams are all importable from "@/lib/types/workspace".
  </done>
</task>

<task type="auto">
  <name>Task 2: Create user domain barrel</name>
  <files>
    lib/types/user/models.ts
    lib/types/user/requests.ts
    lib/types/user/responses.ts
    lib/types/user/custom.ts
    lib/types/user/index.ts
  </files>
  <action>
Create the lib/types/user/ directory with categorized barrel files:

**models.ts** - Re-export user model types from @/lib/types/models:
- User, UserDisplay

**requests.ts** - Empty initially since user request payloads are derived from operations.
Add a comment explaining request payloads are in custom.ts via operations type.

**responses.ts** - Empty initially since user response payloads are derived from operations.
Add a comment explaining response payloads are in custom.ts via operations type.

**custom.ts** - Move operation-derived types from user.interface.ts:
Import `operations` from "@/lib/types/types".

Request payload types:
- UpdateUserProfileRequest = operations["updateUserProfile"]["requestBody"]["content"]["application/json"]

Response payload types:
- GetCurrentUserResponse = operations["getCurrentUser"]["responses"]["200"]["content"]["*/*"]
- GetUserByIdResponse = operations["getUserById"]["responses"]["200"]["content"]["*/*"]
- UpdateUserProfileResponse = operations["updateUserProfile"]["responses"]["200"]["content"]["*/*"]

Path parameter types:
- GetUserByIdPathParams = operations["getUserById"]["parameters"]["path"]
- DeleteUserProfileByIdPathParams = operations["deleteUserProfileById"]["parameters"]["path"]

**index.ts** - Aggregate all exports:
- `export type * from "./models";`
- `export type * from "./requests";`
- `export type * from "./responses";`
- `export * from "./custom";`

Use explicit `export type { }` syntax in type-only files.
  </action>
  <verify>
Run TypeScript check: `npx tsc --noEmit lib/types/user/index.ts`
Verify imports resolve: Create temp test with `import type { User, GetCurrentUserResponse } from "@/lib/types/user"` and run tsc
  </verify>
  <done>
All 5 user barrel files exist with correct exports. TypeScript compiles without errors. User, GetCurrentUserResponse, UpdateUserProfileRequest are all importable from "@/lib/types/user".
  </done>
</task>

<task type="auto">
  <name>Task 3: Verify barrel imports work end-to-end</name>
  <files>test/types/workspace-user-barrel-verification.test.ts</files>
  <action>
Create a TypeScript verification test file that imports from both barrels and confirms types resolve:

```typescript
// test/types/workspace-user-barrel-verification.test.ts
// Verification that workspace and user domain barrels export correctly

// Workspace barrel imports
import type {
    Workspace,
    WorkspaceMember,
    WorkspaceInvite,
    SaveWorkspaceRequest,
    GetWorkspacePathParams,
    GetWorkspaceQueryParams,
    WorkspaceInviteStatus,
} from "@/lib/types/workspace";

// User barrel imports
import type {
    User,
    UserDisplay,
    UpdateUserProfileRequest,
    GetCurrentUserResponse,
    GetUserByIdResponse,
    GetUserByIdPathParams,
} from "@/lib/types/user";

describe("Workspace and User barrel exports", () => {
    it("workspace barrel exports types correctly", () => {
        // Type-level checks - if this compiles, types work
        const checkWorkspace = (ws: Workspace) => ws.id;
        const checkMember = (m: WorkspaceMember) => m.userId;
        const checkPath = (p: GetWorkspacePathParams) => p.workspaceId;
        expect(true).toBe(true);
    });

    it("user barrel exports types correctly", () => {
        // Type-level checks - if this compiles, types work
        const checkUser = (u: User) => u.id;
        const checkResponse = (r: GetCurrentUserResponse) => r;
        const checkPath = (p: GetUserByIdPathParams) => p.userId;
        expect(true).toBe(true);
    });
});
```

Run the test file through TypeScript compiler to verify imports resolve.
  </action>
  <verify>
Run: `npx tsc --noEmit test/types/workspace-user-barrel-verification.test.ts`
Run: `npm test -- test/types/workspace-user-barrel-verification.test.ts`
  </verify>
  <done>
Verification test file exists and passes. TypeScript compiles successfully. Both barrels provide all expected exports.
  </done>
</task>

</tasks>

<verification>
1. TypeScript compilation passes for all barrel files
2. Both workspace and user barrel directories exist with 5 files each
3. Import paths resolve: `@/lib/types/workspace` and `@/lib/types/user`
4. Operation-derived types are correctly extracted from operations type
5. Verification test passes
</verification>

<success_criteria>
- `import type { Workspace } from "@/lib/types/workspace"` works
- `import type { User } from "@/lib/types/user"` works
- Path parameter types are accessible via barrels
- Response types are accessible via barrels
- TypeScript compiler passes with no errors
- Verification test passes
</success_criteria>

<output>
After completion, create `.planning/phases/02-type-barrels/02-02-SUMMARY.md`
</output>
